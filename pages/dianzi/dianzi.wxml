<!--pages/dianzi/dianzi.wxml-->
<!-- 互动点子库 - 点子tab页面 -->

<view class="container">
  <!-- 标题区域 -->
  <view class="title-section">
    <text class="main-title">🎉 互动点子库 🎊</text>
    <text class="sub-title">为您的聚会增添欢乐</text>
  </view>

  <!-- 场景选择区 -->
  <view class="scene-section">
    <text class="section-title">选择场景</text>
    <text class="section-subtitle">点击下方场景按钮开始</text>
    <!-- 横向可滚动的场景选择条，解决按钮过多显示不全的问题 -->
    <scroll-view class="scene-scroll" scroll-x="true" show-scrollbar="false">
      <view class="scene-buttons">
        <!-- 根据 sceneList 动态渲染场景按钮，方便无限扩展 -->
        <button
          wx:for="{{sceneList}}"
          wx:key="key"
          class="scene-btn {{selectedScene === item.key ? 'active' : ''}}"
          data-scene="{{item.key}}"
          bindtap="selectScene"
        >
          {{item.label}}
        </button>
      </view>
    </scroll-view>
  </view>

  <!-- 生成模式区：只有选中场景后才显示 -->
  <view class="generate-section" id="generate-section" wx:if="{{selectedScene}}">
    <text class="section-title">生成游戏</text>
    
    <!-- 随机生成按钮 -->
    <button class="random-btn" bindtap="randomGenerate">
      🎲 随机生成
    </button>

    <!-- 游戏列表：显示当前场景下的所有游戏名称 -->
    <view class="game-list">
      <text class="list-title">或选择指定游戏：</text>
      <view 
        class="game-item {{currentGame && currentGame.name === item.name ? 'active' : ''}}"
        wx:for="{{sceneGames[selectedScene]}}"
        wx:key="name"
        data-name="{{item.name}}"
        bindtap="selectGame"
      >
        {{item.name}}
      </view>
    </view>
  </view>

  <!-- 游戏详情区：只有生成游戏后才显示 -->
  <view class="detail-section" id="game-detail" wx:if="{{currentGame}}">
    <view class="detail-header">
      <text class="game-name">{{currentGame.name}}</text>
      <button class="change-btn" bindtap="changeGame">🔄 换一个</button>
    </view>

    <!-- 游戏描述 -->
    <view class="detail-item">
      <text class="detail-label">📝 游戏描述：</text>
      <text class="detail-content">{{currentGame.desc}}</text>
    </view>

    <!-- 适合人数 -->
    <view class="detail-item">
      <text class="detail-label">👥 适合人数：</text>
      <text class="detail-content">{{currentGame.people}}</text>
    </view>

    <!-- 道具列表 -->
    <view class="detail-item">
      <text class="detail-label">🎁 所需道具：</text>
      <view class="props-list">
        <view class="props-item" wx:for="{{currentGame.props}}" wx:key="*this" wx:for-item="prop">
          <text class="props-dot">•</text>
          <text>{{prop}}</text>
        </view>
      </view>
    </view>

    <!-- 规则列表 -->
    <view class="detail-item">
      <text class="detail-label">📋 游戏规则：</text>
      <view class="rules-list">
        <view class="rule-item" wx:for="{{currentGame.rules}}" wx:key="*this" wx:for-item="rule" wx:for-index="index">
          <text class="rule-num">{{index + 1}}.</text>
          <text class="rule-text">{{rule}}</text>
        </view>
      </view>
    </view>
  </view>

  <!-- 联系我们区域 -->
  <view class="contact-section">
    <text class="contact-text">联系我们：736923621@qq.com</text>
  </view>
</view>