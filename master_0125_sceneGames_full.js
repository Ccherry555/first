125:    sceneGames: {
126-      '过年': [
127-        {
128-          name: '抢红包',
129-          desc: '经典过年互动游戏，考验反应速度和运气',
130-          people: '3-10人',
131-          props: ['红包（纸质或电子）', '计时器', '音乐'],
132-          rules: [
133-            '主持人准备多个红包，其中一部分装有奖励',
134-            '参与者围成一圈，音乐响起时传递红包',
135-            '音乐停止时，手持红包的人可以打开',
136-            '获得奖励者需要表演小节目或说祝福语',
137-            '可以设置多轮，增加趣味性'
138-          ]
139-        },
140-        {
141-          name: '新年祝福接龙',
142-          desc: '创意祝福语接龙，锻炼语言表达能力',
143-          people: '4-12人',
144-          props: ['计时器', '记录纸（可选）'],
145-          rules: [
146-            '参与者轮流说出包含"新年"或"年"字的祝福语',
147-            '前一个人说完后，后一个人必须在3秒内接上',
148-            '祝福语不能重复，必须带有正能量',
149-            '接不上或重复的参与者出局',
150-            '最后留下的3人获得新年礼物'
151-          ]
152-        },
153-        {
154-          name: '年货大采购',
155-          desc: '趣味角色扮演游戏，模拟年货采购场景',
156-          people: '5-8人',
157-          props: ['卡片或纸条（代表商品）', '代币或积分'],
158-          rules: [
159-            '设定多种年货商品（糖果、坚果、春联等）',
160-            '每个参与者分配固定预算，需要采购指定数量的商品',
161-            '通过竞拍、交换等方式获得商品',
162-            '在规定时间内完成采购任务者获胜',
163-            '可以设置特殊事件（打折、限购等）增加难度'
164-          ]
165-        },
166-        {
167-          name: '爆竹传花',
168-          desc: '结合传统元素的音乐传物游戏',
169-          people: '6-15人',
170-          props: ['音乐设备', '道具花或小物品'],
171-          rules: [
172-            '参与者围成圆圈，传递道具',
173-            '音乐响起时开始传递，停止时手持道具者需要表演',
174-            '表演内容可以是新年祝福、才艺展示或小游戏',
175-            '表演完成后，由该参与者决定下一轮传递方向',
176-            '可以准备小礼品奖励表演者'
177-          ]
178-        },
179-        {
180-          name: '春联对对碰',
181-          desc: '创意春联创作和配对游戏，考验文学功底',
182-          people: '4-10人',
183-          props: ['红纸', '毛笔或马克笔', '计时器'],
184-          rules: [
185-            '分成两组，每组轮流创作上联或下联',
186-            '对方组需要在限定时间内对出下联或上联',
187-            '对仗工整、寓意吉祥的得分更高',
188-            '可以设置主题，如"家庭和睦""事业顺利"等',
189-            '得分最高的一组获得新年大礼包'
190-          ]
191-        },
192-        {
193-          name: '年夜饭大竞猜',
194-          desc: '通过描述猜菜名，增加年夜饭趣味性',
195-          people: '5-15人',
196-          props: ['菜品卡片', '计时器'],
197-          rules: [
198-            '准备多张年夜饭常见菜品的卡片',
199-            '一人描述菜品特征（不能直接说菜名），其他人抢答',
200-            '猜对者得分，描述者也可以得分',
201-            '可以设置难度等级，如"年年有余"（鱼）等谐音题',
202-            '得分最高者获得"美食家"称号'
203-          ]
204-        },
205-        {
206-          name: '守岁倒计时',
207-          desc: '跨年倒计时前的互动小游戏',
208-          people: '不限',
209-          props: ['计时器', '心愿卡片', '许愿箱'],
210-          rules: [
211-            '在跨年倒计时前30分钟开始',
212-            '每人写下新年愿望，投入许愿箱',
213-            '轮流抽取愿望并大声念出，大家一起祝福',
214-            '可以设置"愿望实现挑战"，如"今年要旅行3次"等',
215-            '倒计时时一起许愿，增加仪式感'
216-          ]
217-        },
218-        {
219-          name: '生肖大转盘',
220-          desc: '结合生肖元素的转盘抽奖游戏',
221-          people: '6-20人',
222-          props: ['转盘（可自制）', '指针', '奖品'],
223-          rules: [
224-            '制作一个包含12生肖的转盘',
225-            '每个生肖对应不同的任务或奖励',
226-            '参与者轮流转动转盘，完成对应任务',
227-            '任务可以是"表演节目""说祝福语""分享新年计划"等',
228-            '完成任务的参与者获得小礼品'
229-          ]
230-        },
231-        {
232-          name: '新年愿望树',
233-          desc: '大家一起装饰许愿树，写下新年愿望',
234-          people: '3-20人',
235-          props: ['许愿树（可自制）', '便签纸', '笔', '装饰品'],
236-          rules: [
237-            '准备一棵小树或画一棵树在墙上',
238-            '每人写下1-3个新年愿望，贴在树上',
239-            '可以设置愿望主题，如"健康""事业""家庭"等',
240-            '大家一起装饰许愿树，拍照留念',
241-            '年底可以回顾愿望实现情况'
242-          ]
243-        },
244-        {
245-          name: '猜灯谜',
246-          desc: '传统猜灯谜游戏，考验智力',
247-          people: '4-12人',
248-          props: ['灯谜卡片', '计时器', '小奖品'],
249-          rules: [
250-            '准备多道灯谜，难度从易到难',
251-            '主持人念出灯谜，参与者抢答',
252-            '答对者得分，答错者扣分或出局',
253-            '可以设置"提示卡"，答错后可用提示',
254-            '得分最高者获得"智慧之星"称号'
255-          ]
256-        },
257-        {
258-          name: '新年祝福接力',
259-          desc: '用肢体语言传递新年祝福语',
260-          people: '6-15人',
261-          props: ['祝福语卡片'],
262-          rules: [
263-            '分成两组，每组站成一排',
264-            '第一个人看卡片上的祝福语，用动作传递给下一个人',
265-            '最后一个人猜出祝福语，猜对得分',
266-            '不能说话，只能用动作和表情',
267-            '传递最准确、猜对最多的一组获胜'
268-          ]
269-        }
270-      ],
271-      '结婚': [
272-        {
273-          name: '爱情密码',
274-          desc: '测试新人和宾客默契度的趣味游戏',
275-          people: '新人+6-10位宾客',
276-          props: ['答题板或纸笔', '问题卡片'],
277-          rules: [
278-            '新郎新娘背对背坐下，回答相同的问题',
279-            '问题可以是：第一次见面地点、最喜欢的食物、生日等',
280-            '答案一致得1分，不一致扣1分',
281-            '宾客也可以参与竞猜，猜对的获得小礼品',
282-            '分数最高者获得"最佳默契"奖'
283-          ]
284-        },
285-        {
286-          name: '红包雨',
287-          desc: '结合电子红包的互动抢红包游戏',
288-          people: '8-20人',
289-          props: ['手机微信', '红包群', '投影或大屏（可选）'],
290-          rules: [
291-            '创建微信群，提前告知宾客加入',
292-            '主持人随机在群内发红包，限时抢',
293-            '抢到红包金额最大的3位宾客上台表演',
294-            '表演内容可以是祝福、才艺或互动小游戏',
295-            '也可以设置特殊规则，如"手气最佳者配对游戏"'
296-          ]
297-        },
298-        {
299-          name: '花式敬酒',
300-          desc: '创意敬酒方式挑战，增加婚礼趣味性',
301-          people: '新人+所有宾客',
302-          props: ['酒杯', '饮品', '挑战卡片'],
303-          rules: [
304-            '准备多种创意敬酒方式（单手、蒙眼、接力等）',
305-            '宾客可以向新人提出敬酒挑战',
306-            '新人可以选择接受挑战或指定他人完成',
307-            '完成挑战的宾客获得新人准备的小礼品',
308-            '可以设置敬酒次数限制，控制节奏'
309-          ]
310-        },
311-        {
312-          name: '婚礼寻宝',
313-          desc: '在婚礼现场进行寻宝互动游戏',
314-          people: '10-30人',
315-          props: ['藏宝卡片', '线索提示', '奖品'],
316-          rules: [
317-            '提前在婚礼现场隐藏多个"藏宝卡片"',
318-            '每个卡片对应一个线索或直接是奖品',
319-            '宾客分组或单独行动，寻找卡片',
320-            '找到卡片后需要完成卡片上的任务才能获得奖品',
321-            '设置大奖卡片，增加游戏刺激性'
322-          ]
323-        },
324-        {
325-          name: '新人默契大考验',
326-          desc: '通过问答测试新人的默契程度',
327-          people: '新人+8-15位宾客',
328-          props: ['问题卡片', '答题板', '计分器'],
329-          rules: [
330-            '准备关于新人恋爱经历的问题',
331-            '新郎新娘背对背，同时回答相同问题',
332-            '答案一致得2分，不一致扣1分',
333-            '宾客可以参与竞猜，猜对新人答案的得分',
334-            '得分最高者获得"最了解新人"奖'
335-          ]
336-        },
337-        {
338-          name: '抛绣球',
339-          desc: '传统抛绣球游戏，增加婚礼互动性',
340-          people: '新人+所有单身宾客',
341-          props: ['绣球或花束', '音乐'],
342-          rules: [
343-            '新娘背对宾客，手持绣球',
344-            '音乐响起，新娘向后抛绣球',
345-            '抢到绣球的单身宾客上台表演或说祝福',
346-            '可以设置多轮，增加参与度',
347-            '抢到绣球者获得新人准备的小礼品'
348-          ]
349-        },
350-        {
351-          name: '婚礼真心话',
352-          desc: '新人回答宾客提出的趣味问题',
353-          people: '新人+所有宾客',
354-          props: ['问题箱', '抽签盒'],
355-          rules: [
356-            '提前收集宾客想问新人的问题，放入问题箱',
357-            '新人轮流抽取问题并回答',
358-            '问题可以是"第一次约会地点""谁先表白的"等',
359-            '回答后可以请提问者分享相关故事',
360-            '增加现场互动和趣味性'
361-          ]
362-        },
363-        {
364-          name: '爱的传递',
365-          desc: '用接力的方式传递对新人的祝福',
366-          people: '10-30人',
367-          props: ['祝福卡片', '音乐'],
368-          rules: [
369-            '宾客围成圆圈，传递祝福卡片',
370-            '音乐停止时，手持卡片者说出对新人的祝福',
371-            '祝福内容不能重复，必须真诚',
372-            '可以设置"特殊祝福"，如"用方言说""用歌曲唱"等',
373-            '所有祝福收集后送给新人作为纪念'
374-          ]
375-        },
376-        {
377-          name: '婚礼快问快答',
378-          desc: '关于新人恋爱史的快速问答游戏',
379-          people: '新人+6-15位宾客',
380-          props: ['问题卡片', '抢答器或举手'],
381-          rules: [
382-            '主持人提问关于新人的问题',
383-            '宾客抢答，答对得分',
384-            '新人也可以参与，答对得分翻倍',
385-            '问题包括"第一次见面时间""求婚地点"等',
386-            '得分最高者获得"新人知心好友"奖'
387-          ]
388-        },
389-        {
390-          name: '爱的拼图',
391-          desc: '用新人照片制作拼图，宾客合作完成',
392-          people: '8-20人',
393-          props: ['新人照片拼图', '计时器'],
394-          rules: [
395-            '将新人合照制作成拼图，打乱',
396-            '宾客分组，每组获得部分拼图片段',
397-            '在规定时间内完成拼图',
398-            '最快完成的一组获得奖品',
399-            '完成的拼图可以装裱送给新人'
400-          ]
401-        },
402-        {
403-          name: '婚礼祝福墙',
404-          desc: '宾客在祝福墙上写下对新人的祝福',
405-          people: '不限',
406-          props: ['祝福墙（可自制）', '便签纸', '笔', '装饰品'],
407-          rules: [
408-            '准备一面墙或展板作为祝福墙',
409-            '每位宾客写下对新人的祝福并贴上',
410-            '可以设置主题，如"对新人的建议""最想说的话"等',
411-            '新人可以现场阅读部分祝福',
412-            '祝福墙可以拍照留念，作为婚礼纪念'
413-          ]
414-        },
415-        {
416-          name: '新人模仿秀',
417-          desc: '宾客模仿新人的经典动作或话语',
418-          people: '6-15人',
419-          props: ['模仿卡片', '小道具'],
420-          rules: [
421-            '准备新人的经典动作或话语卡片',
422-            '宾客抽取卡片，模仿新人的行为',
423-            '其他宾客猜模仿的是谁（新郎/新娘）',
424-            '模仿最像、猜对最多的获得奖品',
425-            '增加现场欢乐氛围'
426-          ]
427-        }
428-      ],
429-      // 生日派对场景
430-      '生日派对': [
431-        {
432-          name: '生日愿望盲猜',
433-          desc: '大家写下对寿星的猜测愿望，看谁最了解寿星',
434-          people: '4-15人',
435-          props: ['便签纸', '笔', '收集盒'],
436-          rules: [
437-            '每位宾客写下自己认为寿星今年最大的一个愿望',
438-            '寿星也秘密写下自己的真实愿望',
439-            '主持人随机念出愿望，让大家猜哪一个才是真的',
440-            '猜中的玩家获得小礼物，寿星可以选择公开或保留愿望'
441-          ]
442-        },
443-        {
444-          name: '吹蜡烛挑战赛',
445-          desc: '围绕生日蛋糕和蜡烛设计的小挑战',
446-          people: '3-10人',
447-          props: ['生日蛋糕', '蜡烛若干'],
448-          rules: [
449-            '设置不同距离的蜡烛，寿星需要在一次呼吸内尽量吹灭更多蜡烛',
450-            '其他玩家也可以参与挑战，看看谁的“肺活量”最强',
451-            '可设置趣味规则，如单脚站立吹、闭眼吹等',
452-            '吹灭最多蜡烛者获得趣味称号'
453-          ]
454-        },
455-        {
456-          name: '童年照片大公开',
457-          desc: '用猜照片的方式回顾寿星的成长经历',
458-          people: '4-20人',
459-          props: ['寿年少时照片若干', '投影或手机'],
460-          rules: [
461-            '提前收集寿星从小到大的几张照片',
462-            '随机展示一张，让大家猜当时发生了什么故事或大概年龄',
463-            '寿星讲述真实故事，与大家分享童年趣事'
464-          ]
465-        },
466-        {
467-          name: '礼物盲选',
468-          desc: '所有礼物统一包装，寿星凭感觉挑选',
469-          people: '3-12人',
470-          props: ['统一包装纸', '礼物若干'],
471-          rules: [
472-            '所有宾客将礼物统一包装，不能看出里面是什么',
473-            '寿星通过摇晃、触摸等方式，从外观判断并选择一个打开',
474-            '其余礼物可以通过小游戏或抽签方式再分配'
475-          ]
476-        },
477-        {
478-          name: '生日真心话转瓶子',
479-          desc: '用旋转瓶子决定谁来回答与寿星相关的问题',
480-          people: '4-12人',
481-          props: ['空瓶一个', '问题卡片'],
482-          rules: [
483-            '大家围坐成圈，将空瓶放在中间',
484-            '轮流旋转瓶子，瓶口指向谁，谁抽取一张问题卡回答',
485-            '问题内容围绕寿星，如“第一次见寿星的印象”“最想对寿星说的话”等'
486-          ]
487-        },
488-        {
489-          name: '一分钟才艺秀',
490-          desc: '所有宾客轮流上场，为寿星献上一分钟表演',
491-          people: '5-20人',
492-          props: ['音乐设备（可选）', '小道具若干'],
493-          rules: [
494-            '每个人准备一个一分钟以内的小才艺或小表演',
495-            '表演内容可以是唱歌、讲笑话、模仿秀等',
496-            '寿星作为评委，选出“最佳用心奖”和“最搞笑奖”'
497-          ]
498-        },
499-        {
500-          name: '气球墙打卡',
501-          desc: '用五颜六色的气球打造拍照打卡区',
502-          people: '不限',
503-          props: ['彩色气球', '双面胶或绑绳', '背景布（可选）'],
504-          rules: [
505-            '在墙面或背景布上布置成色彩丰富的气球墙',
506-            '每位来宾到场时在气球墙前拍照并说一句祝福语',
507-            '可以设置最佳照片评选或集赞活动'
508-          ]
509-        },
510-        {
511-          name: '生日愿望瓶',
512-          desc: '将愿望写在纸条上放入许愿瓶，年底打开',
513-          people: '3-15人',
514-          props: ['透明瓶子', '彩色纸条', '笔'],
515-          rules: [
516-            '每人写下1-3个生日愿望，折好放入许愿瓶',
517-            '可以设置愿望主题，如"健康""事业""爱情"等',
518-            '许愿瓶封存，约定一年后打开查看',
519-            '可以拍照记录，年底回顾愿望实现情况'
520-          ]
521-        },
522-        {
523-          name: '寿星模仿秀',
524-          desc: '宾客模仿寿星的经典动作或口头禅',
525-          people: '5-15人',
526-          props: ['模仿卡片', '小道具'],
527-          rules: [
528-            '准备寿星的经典动作或口头禅卡片',
529-            '宾客抽取卡片，模仿寿星的行为',
530-            '其他宾客猜模仿的是什么',
531-            '模仿最像、猜对最多的获得奖品'
532-          ]
533-        },
534-        {
535-          name: '生日时间胶囊',
536-          desc: '写下给未来自己的话，封存起来',
537-          people: '3-20人',
538-          props: ['时间胶囊盒', '信纸', '笔', '密封袋'],
539-          rules: [
540-            '每人写一封给一年后自己的信',
541-            '可以写下目标、愿望、想说的话等',
542-            '统一封存，约定一年后打开',
543-            '可以设置多个时间点，如"3年后""5年后"等'
544-          ]
545-        },
546-        {
547-          name: '生日祝福接龙',
548-          desc: '用接龙的方式传递对寿星的祝福',
549-          people: '6-20人',
550-          props: ['祝福卡片', '音乐'],
551-          rules: [
552-            '宾客围成圆圈，传递祝福卡片',
553-            '音乐停止时，手持卡片者说出对寿星的祝福',
554-            '祝福内容不能重复，必须真诚',
555-            '可以设置"特殊祝福"，如"用方言说""用歌曲唱"等'
556-          ]
557-        },
558-        {
559-          name: '生日快问快答',
560-          desc: '关于寿星的快速问答游戏',
561-          people: '5-15人',
562-          props: ['问题卡片', '抢答器或举手'],
563-          rules: [
564-            '主持人提问关于寿星的问题',
565-            '宾客抢答，答对得分',
566-            '问题包括"最喜欢的食物""最难忘的经历"等',
567-            '得分最高者获得"最了解寿星"奖'
568-          ]
569-        }
570-      ],
571-      // 家庭聚会场景
572-      '家庭聚会': [
573-        {
574-          name: '家庭版谁是卧底',
575-          desc: '适合老少同乐的轻量版推理游戏',
576-          people: '4-12人',
577-          props: ['词语卡片或手机App'],
578-          rules: [
579-            '为避免难度过高，选择生活化、家庭化的词语',
580-            '每轮发放相同词语给大多数人，给一人发放相近但不同的词语作为卧底',
581-            '轮流描述自己拿到的词语但不能说出词语本身'
582-          ]
583-        },
584-        {
585-          name: '家庭记忆接龙',
586-          desc: '通过讲家庭故事加强家人之间的情感连接',
587-          people: '3-10人',
588-          props: [],
589-          rules: [
590-            '以“我记得某一年过年……”或“我和某某的有趣回忆是……”为开头',
591-            '每个人必须接着前一个人的话题讲述新的记忆片段'
592-          ]
593-        },
594-        {
595-          name: '家庭厨神大比拼',
596-          desc: '比拼谁做的小菜最受欢迎',
597-          people: '3-8人',
598-          props: ['厨房工具', '简单食材'],
599-          rules: [
600-            '事先准备好几种基础食材，确保操作简单安全',
601-            '每位参赛者在限定时间内完成一道小菜或摆盘'
602-          ]
603-        },
604-        {
605-          name: '家庭照片拼图',
606-          desc: '把家庭合照做成拼图重新拼接',
607-          people: '2-6人',
608-          props: ['打印照片', '剪刀', '信封'],
609-          rules: [
610-            '将家庭合照打印后剪成若干块，装入信封',
611-            '计时看谁在最短时间内完成拼图'
612-          ]
613-        },
614-        {
615-          name: '代际问答赛',
616-          desc: '长辈问年轻人“旧知识”，年轻人问长辈“新潮流”',
617-          people: '4-12人',
618-          props: ['题目卡片'],
619-          rules: [
620-            '长辈准备一些关于老歌、老电影、年代事件的问题',
621-            '年轻人准备一些关于网络热词、流行文化的问题'
622-          ]
623-        },
624-        {
625-          name: '家庭角色互换',
626-          desc: '用角色扮演的方式体验彼此的日常',
627-          people: '3-8人',
628-          props: ['简单道具（眼镜、帽子等）'],
629-          rules: [
630-            '随机抽取家庭成员的角色，如"爸爸""妈妈""孩子"等',
631-            '每个人用 1 分钟时间表演自己抽到角色的一天'
632-          ]
633-        },
634-        {
635-          name: '家庭版你画我猜',
636-          desc: '用画画的方式猜家庭相关的词语',
637-          people: '4-12人',
638-          props: ['白板或纸', '笔', '词语卡片'],
639-          rules: [
640-            '分成两组，每组轮流派一人画画',
641-            '画的人不能说话，只能画图',
642-            '队友猜词语，猜对得分',
643-            '词语可以是"家庭用品""家庭成员""家庭活动"等'
644-          ]
645-        },
646-        {
647-          name: '家庭故事会',
648-          desc: '轮流分享家庭趣事，增进感情',
649-          people: '3-10人',
650-          props: ['故事卡片（可选）'],
651-          rules: [
652-            '每人准备一个家庭相关的有趣故事',
653-            '轮流分享，其他人可以提问或补充',
654-            '可以设置主题，如"最搞笑的家庭瞬间""最感动的时刻"等',
655-            '分享后大家一起讨论，增加互动'
656-          ]
657-        },
658-        {
659-          name: '家庭默契大考验',
660-          desc: '测试家庭成员之间的默契程度',
661-          people: '4-12人',
662-          props: ['问题卡片', '答题板'],
663-          rules: [
664-            '准备关于家庭的问题，如"妈妈最喜欢吃什么"等',
665-            '家庭成员同时回答，答案一致得分',
666-            '可以设置难度等级，增加挑战性',
667-            '得分最高者获得"家庭默契王"称号'
668-          ]
669-        },
670-        {
671-          name: '家庭版传话游戏',
672-          desc: '用传话的方式传递家庭信息',
673-          people: '5-15人',
674-          props: ['传话卡片'],
675-          rules: [
676-            '分成两组，每组站成一排',
677-            '第一个人看卡片上的话，悄悄传给下一个人',
678-            '最后一个人说出听到的话，与原文对比',
679-            '传递最准确的一组获胜'
680-          ]
681-        },
682-        {
683-          name: '家庭才艺展示',
684-          desc: '每个家庭成员展示自己的才艺',
685-          people: '3-10人',
686-          props: ['才艺道具（可选）'],
687-          rules: [
688-            '每人准备一个才艺展示，如唱歌、跳舞、讲笑话等',
689-            '轮流表演，其他人作为观众',
690-            '可以设置"最佳才艺奖""最搞笑奖"等',
691-            '增加家庭欢乐氛围'
692-          ]
693-        },
694-        {
695-          name: '家庭版真心话大冒险',
696-          desc: '适合家庭的轻量版真心话大冒险',
697-          people: '4-12人',
698-          props: ['问题卡片', '挑战卡片'],
699-          rules: [
700-            '准备适合家庭的问题和挑战',
701-            '轮流抽取卡片，选择"真心话"或"大冒险"',
702-            '问题要温馨，挑战要安全有趣',
703-            '增加家庭成员之间的了解'
704-          ]
705-        }
706-      ],
707-      // 公司团建场景
708-      '公司团建': [
709-        {
710-          name: '名字加印象',
711-          desc: '破冰游戏，帮助新人快速记住彼此',
712-          people: '6-30人',
713-          props: [],
714-          rules: [
715-            '所有人围成一圈，依次说出“我是XX，我的一个关键词是XX”',
716-            '下一位需要重复前面所有人的名字+关键词，再补充自己'
717-          ]
718-        },
719-        {
720-          name: '团队建筑师',
721-          desc: '用有限材料搭建最高或最稳定的“建筑”',
722-          people: '8-24人',
723-          props: ['纸杯', '胶带', '纸张', '吸管等简易材料'],
724-          rules: [
725-            '分成若干小组，每组获得相同材料',
726-            '在限定时间内搭建一座尽可能高或能承重的小塔'
727-          ]
728-        },
729-        {
730-          name: '办公室版狼人/卧底',
731-          desc: '融入职场元素的推理游戏',
732-          people: '6-18人',
733-          props: ['身份牌', '计时器'],
734-          rules: [
735-            '根据团队氛围选择“谁是卧底”或“狼人杀”等规则',
736-            '可将身份替换为“产品经理”“测试”“运营”等岗位称呼'
737-          ]
738-        },
739-        {
740-          name: '团队解密任务',
741-          desc: '通过解谜题完成“任务线”，锻炼团队合作',
742-          people: '6-20人',
743-          props: ['打印好的谜题卡', '线索道具'],
744-          rules: [
745-            '准备若干与公司业务或日常趣事相关的谜题',
746-            '每解开一个谜题，就能获得下一个线索'
747-          ]
748-        },
749-        {
750-          name: '无声排序',
751-          desc: '禁止说话，只能用肢体语言完成排序任务',
752-          people: '6-20人',
753-          props: ['题目提示卡'],
754-          rules: [
755-            '给每人发放一张写有数字或日期的卡片，不能让别人看到',
756-            '所有人禁止说话，只能通过肢体或表情交流'
757-          ]
758-        },
759-        {
760-          name: '极速演讲',
761-          desc: '锻炼表达能力和随机应变能力的小游戏',
762-          people: '4-15人',
763-          props: ['主题卡片', '计时器'],
764-          rules: [
765-            '准备一批与工作或生活相关的随机主题',
766-            '参与者抽到主题后，需要在 30 秒内即兴演讲'
767-          ]
768-        },
769-        {
770-          name: '团队信任背摔',
771-          desc: '经典的团队信任游戏，增强团队凝聚力',
772-          people: '8-20人',
773-          props: ['安全垫（可选）'],
774-          rules: [
775-            '一人站在高处，背对团队向后倒',
776-            '团队成员用手接住，确保安全',
777-            '完成后分享感受，讨论信任的重要性',
778-            '注意安全，确保有足够的人接住'
779-          ]
780-        },
781-        {
782-          name: '办公室版你画我猜',
783-          desc: '用画画的方式猜职场相关词语',
784-          people: '6-18人',
785-          props: ['白板或纸', '笔', '词语卡片'],
786-          rules: [
787-            '分成两组，每组轮流派一人画画',
788-            '画的人不能说话，只能画图',
789-            '队友猜词语，猜对得分',
790-            '词语可以是"工作用品""职位名称""工作场景"等'
791-          ]
792-        },
793-        {
794-          name: '团队拼图挑战',
795-          desc: '分组完成拼图，考验团队协作',
796-          people: '8-24人',
797-          props: ['拼图若干', '计时器'],
798-          rules: [
799-            '分成若干小组，每组获得相同难度的拼图',
800-            '在规定时间内完成拼图',
801-            '最快完成的一组获胜',
802-            '可以设置奖励，增加竞争性'
803-          ]
804-        },
805-        {
806-          name: '职场版狼人杀',
807-          desc: '融入职场元素的推理游戏',
808-          people: '8-18人',
809-          props: ['身份牌', '计时器'],
810-          rules: [
811-            '将身份替换为"老板""员工""HR"等职场角色',
812-            '根据团队氛围调整游戏规则',
813-            '增加职场元素，如"项目会议""绩效考核"等',
814-            '锻炼逻辑思维和表达能力'
815-          ]
816-        },
817-        {
818-          name: '团队创意海报',
819-          desc: '分组设计创意海报，展示团队文化',
820-          people: '8-24人',
821-          props: ['大纸', '彩笔', '装饰材料'],
822-          rules: [
823-            '分成若干小组，每组设计一张团队海报',
824-            '海报主题可以是"团队口号""团队目标"等',
825-            '在规定时间内完成，然后展示和评选',
826-            '最佳海报获得奖品'
827-          ]
828-        },
829-        {
830-          name: '团队接力挑战',
831-          desc: '多种小任务组成的接力挑战',
832-          people: '10-30人',
833-          props: ['任务卡片', '道具若干'],
834-          rules: [
835-            '分成若干小组，每组完成一系列任务',
836-            '任务包括"解谜题""做动作""回答问题"等',
837-            '完成一个任务才能获得下一个任务',
838-            '最快完成所有任务的小组获胜'
839-          ]
840-        }
841-      ],
842-      // 同学聚会场景
843-      '同学聚会': [
844-        {
845-          name: '校园回忆快问快答',
846-          desc: '围绕学生时代回忆的抢答游戏',
847-          people: '5-20人',
848-          props: ['题目卡片', '抢答器或举手抢答'],
849-          rules: [
850-            '题目内容包括“谁上课最爱睡觉”“哪个老师最严格”等',
851-            '答题者需要说出具体人名或事件'
852-          ]
853-        },
854-        {
855-          name: '重写同学录',
856-          desc: '用成年后的视角补写当年的同学录',
857-          people: '4-15人',
858-          props: ['小卡片', '笔'],
859-          rules: [
860-            '每人抽取一位同学的名字，匿名写下现在想对 TA 说的话',
861-            '统一收集后随机念出内容，让大家猜是写给谁的'
862-          ]
863-        },
864-        {
865-          name: '班级记忆时间线',
866-          desc: '一起还原那几年的关键事件',
867-          people: '5-20人',
868-          props: ['便利贴', '长纸条或白板'],
869-          rules: [
870-            '在纸上画出时间轴，从入学到毕业',
871-            '每个人写下自己印象最深的一个班级事件贴在时间轴上'
872-          ]
873-        },
874-        {
875-          name: '谁是改变最大的人',
876-          desc: '通过线索猜出同学这些年的变化',
877-          people: '5-20人',
878-          props: ['个人变化小卡片'],
879-          rules: [
880-            '每人写下一个自己这几年最大的变化，如“换了三份工作”等',
881-            '主持人打乱顺序后随机念出内容，让大家猜是谁写的'
882-          ]
883-        },
884-        {
885-          name: '校园 BGM 大合唱',
886-          desc: '点播学生时代流行歌曲，一起合唱',
887-          people: '不限',
888-          props: ['音响设备', '歌曲列表'],
889-          rules: [
890-            '大家轮流点歌，优先选择学生时代最常听的歌曲',
891-            '可以分成合唱、小组对唱、个人 solo 等形式'
892-          ]
893-        },
894-        {
895-          name: '未来同学录',
896-          desc: '给 10 年后的自己和同学写一句话',
897-          people: '3-20人',
898-          props: ['信纸或卡片', '信封'],
899-          rules: [
900-            '每人写一封给十年后自己和同学的小短信',
901-            '统一封存，可以交给组织者保管或拍照保存'
902-          ]
903-        },
904-        {
905-          name: '校园版你画我猜',
906-          desc: '用画画的方式猜校园相关词语',
907-          people: '6-18人',
908-          props: ['白板或纸', '笔', '词语卡片'],
909-          rules: [
910-            '分成两组，每组轮流派一人画画',
911-            '画的人不能说话，只能画图',
912-            '队友猜词语，猜对得分',
913-            '词语可以是"校园建筑""老师名字""校园活动"等'
914-          ]
915-        },
916-        {
917-          name: '同学模仿秀',
918-          desc: '模仿同学的经典动作或口头禅',
919-          people: '6-15人',
920-          props: ['模仿卡片', '小道具'],
921-          rules: [
922-            '准备同学的经典动作或口头禅卡片',
923-            '参与者抽取卡片，模仿同学的行为',
924-            '其他同学猜模仿的是谁',
925-            '模仿最像、猜对最多的获得奖品'
926-          ]
927-        },
928-        {
929-          name: '校园版真心话大冒险',
930-          desc: '适合同学聚会的真心话大冒险',
931-          people: '5-15人',
932-          props: ['问题卡片', '挑战卡片'],
933-          rules: [
934-            '准备适合同学聚会的问题和挑战',
935-            '轮流抽取卡片，选择"真心话"或"大冒险"',
936-            '问题围绕学生时代，挑战要安全有趣',
937-            '增加同学之间的互动和回忆'
938-          ]
939-        },
940-        {
941-          name: '校园歌曲接龙',
942-          desc: '用学生时代流行歌曲接龙',
943-          people: '4-12人',
944-          props: ['音响设备（可选）'],
945-          rules: [
946-            '第一位同学唱一段学生时代的歌曲',
947-            '下一位同学用最后一个字开头唱另一首歌',
948-            '在5秒内接不上或重复歌曲则淘汰',
949-            '最后留下的同学获胜'
950-          ]
951-        },
952-        {
953-          name: '同学祝福墙',
954-          desc: '在祝福墙上写下对同学的祝福',
955-          people: '不限',
956-          props: ['祝福墙（可自制）', '便签纸', '笔', '装饰品'],
957-          rules: [
958-            '准备一面墙或展板作为祝福墙',
959-            '每位同学写下对其他同学的祝福并贴上',
960-            '可以设置主题，如"最想说的话""最美好的回忆"等',
961-            '祝福墙可以拍照留念，作为聚会纪念'
962-          ]
963-        },
964-        {
965-          name: '校园版快问快答',
966-          desc: '关于学生时代的快速问答游戏',
967-          people: '5-20人',
968-          props: ['问题卡片', '抢答器或举手'],
969-          rules: [
970-            '主持人提问关于学生时代的问题',
971-            '同学抢答，答对得分',
972-            '问题包括"谁上课最爱睡觉""哪个老师最严格"等',
973-            '得分最高者获得"校园记忆王"称号'
974-          ]
975-        }
976-      ],
977-      // KTV / 酒吧场景
978-      'KTV酒吧': [
979-        {
980-          name: '抢唱前奏王',
981-          desc: '只放前奏，谁先唱出歌名和第一句歌词',
982-          people: '4-15人',
983-          props: ['KTV 或音响', '歌曲列表'],
984-          rules: [
985-            '随机播放歌曲前奏 3-5 秒，抢先唱对歌名并接上歌词者得分',
986-            '唱错或跑调严重可由大家投票是否算分'
987-          ]
988-        },
989-        {
990-          name: '指定风格演唱',
991-          desc: '用不同风格演绎同一首歌，笑点不断',
992-          people: '3-10人',
993-          props: ['歌曲列表'],
994-          rules: [
995-            '选定一首大家都熟悉的歌曲',
996-            '抽签决定演唱风格，如“摇滚版”“撒娇版”“粤语版”等'
997-          ]
998-        },
999-        {
1000-          name: '不准笑挑战',
1001-          desc: '在别人刻意搞笑演唱时坚持不笑',
1002-          people: '4-12人',
1003-          props: [],
1004-          rules: [
1005-            '指定一位挑战者坐在最前排，其他人轮流进行搞笑演唱',
1006-            '挑战者全程不得笑出声或表情明显失守'
1007-          ]
1008-        },
1009-        {
1010-          name: '麦霸传位',
1011-          desc: '由“麦霸”指定下一位接棒人',
1012-          people: '不限',
1013-          props: ['话筒'],
1014-          rules: [
1015-            '当前拿麦者在演唱结束后，需要指定下一位接棒人',
1016-            '可以附带一个小任务，例如“必须唱一首情歌/摇滚/儿歌”等'
1017-          ]
1018-        },
1019-        {
1020-          name: '歌词接龙',
1021-          desc: '用歌词中的最后一个字接下一首歌',
1022-          people: '3-10人',
1023-          props: [],
1024-          rules: [
1025-            '第一位玩家唱一段歌词，下一位玩家需用最后一个字开头唱出另一首歌',
1026-            '在 5 秒内接不上或重复歌曲则淘汰'
1027-          ]
1028-        },
1029-        {
1030-          name: '角色对唱剧场',
1031-          desc: '边唱边演小情景剧',
1032-          people: '4-10人',
1033-          props: ['简单道具（眼镜、帽子等）'],
1034-          rules: [
1035-            '选择一首对唱或合唱歌曲',
1036-            '为每个人分配一个角色，如"老板和员工""老师和学生"等'
1037-          ]
1038-        },
1039-        {
1040-          name: 'KTV版你画我猜',
1041-          desc: '用画画的方式猜歌曲名',
1042-          people: '6-18人',
1043-          props: ['白板或纸', '笔', '歌曲卡片'],
1044-          rules: [
1045-            '分成两组，每组轮流派一人画画',
1046-            '画的人不能说话，只能画图表示歌曲名',
1047-            '队友猜歌曲名，猜对得分',
1048-            '可以设置难度，如"只画一个字""画整首歌"等'
1049-          ]
1050-        },
1051-        {
1052-          name: '歌曲接龙升级版',
1053-          desc: '用歌词中的字接下一首歌，增加难度',
1054-          people: '4-12人',
1055-          props: ['音响设备（可选）'],
1056-          rules: [
1057-            '第一位玩家唱一段歌词',
1058-            '下一位玩家用最后一个字开头唱另一首歌',
1059-            '可以设置规则，如"必须是同一歌手""必须是同一风格"等',
1060-            '在5秒内接不上或重复歌曲则淘汰'
1061-          ]
1062-        },
1063-        {
1064-          name: 'KTV版真心话大冒险',
1065-          desc: '适合KTV环境的真心话大冒险',
1066-          people: '5-15人',
1067-          props: ['问题卡片', '挑战卡片'],
1068-          rules: [
1069-            '准备适合KTV的问题和挑战',
1070-            '轮流抽取卡片，选择"真心话"或"大冒险"',
1071-            '挑战可以是"唱一首指定风格的歌""模仿某个歌手"等',
1072-            '增加KTV氛围的趣味性'
1073-          ]
1074-        },
1075-        {
1076-          name: '歌曲竞猜王',
1077-          desc: '只听前奏猜歌名和歌手',
1078-          people: '4-15人',
1079-          props: ['KTV或音响', '歌曲列表'],
1080-          rules: [
1081-            '随机播放歌曲前奏2-3秒',
1082-            '参与者抢答，说出歌名和歌手',
1083-            '答对得分，答错扣分',
1084-            '可以设置难度，如"只听1秒""只听副歌"等',
1085-            '得分最高者获得"KTV歌神"称号'
1086-          ]
1087-        },
1088-        {
1089-          name: '合唱大比拼',
1090-          desc: '分组进行合唱比赛',
1091-          people: '8-20人',
1092-          props: ['KTV或音响', '歌曲列表'],
1093-          rules: [
1094-            '分成若干小组，每组选择一首合唱歌曲',
1095-            '轮流演唱，其他组作为评委打分',
1096-            '从"音准""配合""创意"等维度评分',
1097-            '得分最高的小组获得奖品'
1098-          ]
1099-        },
1100-        {
1101-          name: 'KTV版传话游戏',
1102-          desc: '用传话的方式传递歌词',
1103-          people: '6-18人',
1104-          props: ['歌词卡片'],
1105-          rules: [
1106-            '分成两组，每组站成一排',
1107-            '第一个人看卡片上的歌词，悄悄传给下一个人',
1108-            '最后一个人说出听到的歌词，与原文对比',
1109-            '传递最准确的一组获胜'
1110-          ]
1111-        }
1112-      ],
1113-      // 户外活动场景
1114-      '户外活动': [
1115-        {
1116-          name: '寻宝定向越野',
1117-          desc: '结合简单导航的户外寻宝游戏',
1118-          people: '6-30人',
1119-          props: ['地图或手机定位', '线索卡片', '小奖品'],
1120-          rules: [
1121-            '在安全范围内预先设置若干“宝藏点”并埋藏线索',
1122-            '参与者分组，根据提示在规定时间内寻找更多线索'
1123-          ]
1124-        },
1125-        {
1126-          name: '气球保卫战',
1127-          desc: '把气球绑在身上，互相踩气球',
1128-          people: '6-20人',
1129-          props: ['气球若干', '细绳'],
1130-          rules: [
1131-            '每位玩家在脚踝处绑上 1-2 个气球',
1132-            '气球全部被踩爆则淘汰'
1133-          ]
1134-        },
1135-        {
1136-          name: '蒙眼找队友',
1137-          desc: '通过声音或暗号找到自己的队友',
1138-          people: '8-24人',
1139-          props: ['眼罩若干'],
1140-          rules: [
1141-            '预先按人数分成若干小队，并给每队一个独特暗号或动物叫声',
1142-            '所有人戴上眼罩，打乱站位'
1143-          ]
1144-        },
1145-        {
1146-          name: '趣味接力赛',
1147-          desc: '在传统接力赛基础上加入搞笑动作',
1148-          people: '8-24人',
1149-          props: ['接力棒或小道具'],
1150-          rules: [
1151-            '分组进行接力，每一棒需要完成不同的指定动作',
1152-            '例如“袋鼠跳”“螃蟹走路”等'
1153-          ]
1154-        },
1155-        {
1156-          name: '飞盘九宫格',
1157-          desc: '将地面划成九宫格，投掷飞盘得分',
1158-          people: '4-16人',
1159-          props: ['飞盘', '地面胶带或粉笔'],
1160-          rules: [
1161-            '在地面划出九宫格并标注不同得分',
1162-            '轮流投掷飞盘，落入对应区域即可获得相应分数'
1163-          ]
1164-        },
1165-        {
1166-          name: '野餐创意摆盘',
1167-          desc: '比拼谁的野餐摆盘最有氛围感',
1168-          people: '3-12人',
1169-          props: ['野餐垫', '食物和饮品', '简单装饰品'],
1170-          rules: [
1171-            '按小组准备各自的野餐区域',
1172-            '从"颜色搭配""创意""拍照效果"等维度进行评选'
1173-          ]
1174-        },
1175-        {
1176-          name: '户外版你画我猜',
1177-          desc: '用画画的方式猜户外相关词语',
1178-          people: '6-18人',
1179-          props: ['白板或纸', '笔', '词语卡片'],
1180-          rules: [
1181-            '分成两组，每组轮流派一人画画',
1182-            '画的人不能说话，只能画图',
1183-            '队友猜词语，猜对得分',
1184-            '词语可以是"户外用品""自然景观""户外活动"等'
1185-          ]
1186-        },
1187-        {
1188-          name: '户外接力挑战',
1189-          desc: '多种户外任务组成的接力挑战',
1190-          people: '10-30人',
1191-          props: ['任务卡片', '道具若干'],
1192-          rules: [
1193-            '分成若干小组，每组完成一系列户外任务',
1194-            '任务包括"找指定物品""完成指定动作""回答自然问题"等',
1195-            '完成一个任务才能获得下一个任务',
1196-            '最快完成所有任务的小组获胜'
1197-          ]
1198-        },
1199-        {
1200-          name: '自然寻宝',
1201-          desc: '在自然环境中寻找指定物品',
1202-          people: '6-20人',
1203-          props: ['寻宝清单', '收集袋'],
1204-          rules: [
1205-            '准备一份寻宝清单，列出要寻找的自然物品',
1206-            '如"一片红色叶子""一块圆石头""一朵小花"等',
1207-            '在规定时间内找到最多物品的小组获胜',
1208-            '注意保护环境，不要破坏自然'
1209-          ]
1210-        },
1211-        {
1212-          name: '户外版真心话大冒险',
1213-          desc: '适合户外环境的真心话大冒险',
1214-          people: '5-15人',
1215-          props: ['问题卡片', '挑战卡片'],
1216-          rules: [
1217-            '准备适合户外的问题和挑战',
1218-            '轮流抽取卡片，选择"真心话"或"大冒险"',
1219-            '挑战可以是"做10个俯卧撑""模仿动物叫声"等',
1220-            '增加户外活动的趣味性'
1221-          ]
1222-        },
1223-        {
1224-          name: '团队拔河',
1225-          desc: '经典的团队力量对抗游戏',
1226-          people: '12-30人',
1227-          props: ['拔河绳', '标记线'],
1228-          rules: [
1229-            '分成两组，每组人数相等',
1230-            '在标记线两侧进行拔河比赛',
1231-            '将对方拉过标记线的一方获胜',
1232-            '可以设置多轮比赛，增加竞争性',
1233-            '注意安全，确保场地平整'
1234-          ]
1235-        },
1236-        {
1237-          name: '户外摄影大赛',
1238-          desc: '比拼谁的户外照片最有创意',
1239-          people: '4-20人',
1240-          props: ['手机或相机', '主题卡片'],
1241-          rules: [
1242-            '设置摄影主题，如"最美风景""最有趣瞬间"等',
1243-            '在规定时间内拍摄符合主题的照片',
1244-            '统一展示，大家投票评选',
1245-            '最佳照片获得奖品'
1246-          ]
1247-        }
1248-      ]
1249-    }
1250-  },
1251-
1252-  // 弹窗定时器变量（用于防止重复创建定时器）
1253-  welcomeModalTimer: null,
1254-
1255-  /**
1256-   * 生命周期函数--监听页面加载
1257-   */
1258-  onLoad(options) {
1259-    console.log('页面加载')
1260-    this._createRewardedVideoAd()
1261-    this._checkUserData()
1262-  },
1263-
1264-  /**
1265-   * 检查用户数据，显示欢迎信息或使用统计
1266-   */
1267-  _checkUserData() {
1268-    // 防止重复弹出弹窗
1269-    if (this.data.isShowingWelcomeModal || this.welcomeModalTimer !== null) {
1270-      return
1271-    }
1272-    
1273-    try {
1274-      // 读取本地存储的用户数据
1275-      const userData = wx.getStorageSync('userData')
1276-      const now = new Date()
1277-      const nowTime = now.getTime()
1278-      
1279-      if (!userData) {
1280-        // 首次使用，创建用户数据
1281-        const firstUseData = {
1282-          firstUseTime: nowTime,
1283-          lastUseTime: nowTime,
1284-          useCount: 1
1285-        }
1286-        wx.setStorageSync('userData', firstUseData)
1287-        
1288-        // 设置标志，防止重复弹出
1289-        this.setData({
1290-          isShowingWelcomeModal: true
1291-        })
1292-        
1293-        // 显示首次欢迎提示（使用定时器变量防止重复创建）
1294-        this.welcomeModalTimer = setTimeout(() => {
1295-          this.welcomeModalTimer = null
1296-          wx.showModal({
1297-            title: '🎉 欢迎使用互动点子库！',
1298-            content: '感谢您的使用！这里有丰富的聚会小游戏，为您的聚会增添欢乐。\n\n快来选择一个场景，开始生成游戏吧！',
1299-            showCancel: false,
1300-            confirmText: '开始使用',
1301-            confirmColor: '#D32F2F',
1302-            success: () => {
1303-              // 弹窗关闭后重置标志
1304-              this.setData({
1305-                isShowingWelcomeModal: false
1306-              })
1307-            },
1308-            fail: () => {
1309-              // 弹窗失败后重置标志
1310-              this.setData({
1311-                isShowingWelcomeModal: false
1312-              })
1313-            }
1314-          })
1315-        }, 500)
1316-      } else {
1317-        // 非首次使用，更新数据
1318-        const updatedData = {
1319-          firstUseTime: userData.firstUseTime || nowTime,
1320-          lastUseTime: nowTime,
1321-          useCount: (userData.useCount || 0) + 1
1322-        }
1323-        wx.setStorageSync('userData', updatedData)
1324-        
1325-        // 格式化上次使用时间
1326-        const lastTime = new Date(userData.lastUseTime || nowTime)
1327-        const timeDiff = nowTime - lastTime.getTime()
1328-        let timeText = ''
1329-        
1330-        if (timeDiff < 60000) {
1331-          timeText = '刚刚'
1332-        } else if (timeDiff < 3600000) {
1333-          const minutes = Math.floor(timeDiff / 60000)
1334-          timeText = `${minutes}分钟前`
1335-        } else if (timeDiff < 86400000) {
1336-          const hours = Math.floor(timeDiff / 3600000)
1337-          timeText = `${hours}小时前`
1338-        } else if (timeDiff < 604800000) {
1339-          const days = Math.floor(timeDiff / 86400000)
1340-          timeText = `${days}天前`
1341-        } else {
1342-          const month = lastTime.getMonth() + 1
1343-          const date = lastTime.getDate()
1344-          timeText = `${month}月${date}日`
1345-        }
1346-        
1347-        // 设置标志，防止重复弹出
1348-        this.setData({
1349-          isShowingWelcomeModal: true
1350-        })
1351-        
1352-        // 显示欢迎回来信息（使用定时器变量防止重复创建）
1353-        this.welcomeModalTimer = setTimeout(() => {
1354-          this.welcomeModalTimer = null
1355-          wx.showModal({
1356-            title: '👋 欢迎回来！',
1357-            content: `您上次使用：${timeText}\n累计使用：${updatedData.useCount}次\n\n感谢您的持续使用！如果觉得好用，欢迎分享给朋友们哦～`,
1358-            showCancel: false,
1359-            confirmText: '知道了',
1360-            confirmColor: '#D32F2F',
1361-            success: () => {
1362-              // 弹窗关闭后重置标志
1363-              this.setData({
1364-                isShowingWelcomeModal: false
1365-              })
1366-            },
1367-            fail: () => {
1368-              // 弹窗失败后重置标志
1369-              this.setData({
1370-                isShowingWelcomeModal: false
1371-              })
1372-            }
1373-          })
1374-        }, 500)
1375-      }
1376-    } catch (e) {
1377-      console.error('检查用户数据失败', e)
1378-      // 出错时也重置标志和定时器
1379-      if (this.welcomeModalTimer !== null) {
1380-        clearTimeout(this.welcomeModalTimer)
1381-        this.welcomeModalTimer = null
1382-      }
1383-      this.setData({
1384-        isShowingWelcomeModal: false
1385-      })
1386-    }
1387-  },
1388-
1389-  /**
1390-   * 创建激励视频广告实例，用于「换游戏」前观看广告
1391-   */
1392-  _createRewardedVideoAd() {
1393-    if (!wx.createRewardedVideoAd) {
1394-      console.warn('当前基础库不支持激励视频广告')
1395-      return
1396-    }
1397-    try {
1398-      this.videoAd = wx.createRewardedVideoAd({ adUnitId: REWARDED_VIDEO_AD_UNIT_ID })
1399-      this.videoAd.onError(err => {
1400-        console.error('激励视频广告错误', err)
1401-      })
1402-      this.videoAd.load().catch(() => {})
1403-    } catch (e) {
1404-      console.error('创建激励视频广告失败', e)
1405-    }
1406-  },
1407-
1408-  /**
1409-   * 播放激励视频广告，观看完整后执行 callback，否则提示「请观看完整广告」
1410-   * 如果广告开关关闭（AD_ENABLED = false），直接执行 callback，不播放广告
1411-   * @param {Function} callback 看完广告后要执行的操作（如随机生成、换一个、选择指定游戏）
1412-   */
1413-  showAdThenRun(callback) {
1414-    // 如果广告开关关闭，直接执行操作，不播放广告
1415-    if (!AD_ENABLED) {
1416-      typeof callback === 'function' && callback()
1417-      return
1418-    }
1419-    
1420-    if (!this.videoAd) {
1421-      wx.showToast({ title: '广告加载失败，请稍后重试', icon: 'none', duration: 2000 })
1422-      return
1423-    }
1424-    const that = this
1425-    const onClose = (res) => {
1426-      that.videoAd.offClose(onClose)
1427-      if (res && res.isEnded) {
1428-        that.videoAd.load().catch(() => {})
1429-        typeof callback === 'function' && callback()
1430-      } else {
1431-        wx.showToast({ title: '请观看完整广告后再试', icon: 'none', duration: 2000 })
1432-      }
1433-    }
1434-    this.videoAd.onClose(onClose)
1435-    this.videoAd.show().catch(() => {
1436-      that.videoAd.offClose(onClose)
1437-      wx.showToast({ title: '广告加载失败，请稍后重试', icon: 'none', duration: 2000 })
1438-    })
1439-  },
1440-
1441-  /**
1442-   * 场景选择处理函数
1443-   * 点击"过年"或"结婚"按钮时触发
1444-   */
1445-  selectScene(e) {
1446-    const scene = e.currentTarget.dataset.scene
1447-    // 如果选择的是当前场景，则取消选择；否则设置为选中
1448-    const newScene = this.data.selectedScene === scene ? null : scene
1449-    
1450-    this.setData({
1451-      selectedScene: newScene,
1452-      // 切换场景时，清空当前游戏
1453-      currentGame: null
1454-    })
1455-    
1456-    console.log('选择场景：', newScene)
1457-    
1458-    // 如果选择了场景，滚动到生成模式区
1459-    if (newScene) {
1460-      this._scrollToGenerateSection()
1461-    }
1462-  },
1463-
1464-  /**
1465-   * 滚动到生成模式区域
1466-   */
1467-  _scrollToGenerateSection() {
1468-    // 延迟一下，确保页面渲染完成
1469-    setTimeout(() => {
1470-      const query = wx.createSelectorQuery().in(this)
1471-      query.select('#generate-section').boundingClientRect()
1472-      query.selectViewport().scrollOffset()
1473-      query.exec((res) => {
1474-        if (res && res[0] && res[1]) {
1475-          // 计算目标滚动位置：当前滚动位置 + 元素距离视口顶部的距离 - 偏移量
1476-          const scrollTop = res[1].scrollTop + res[0].top - 30
1477-          wx.pageScrollTo({
1478-            scrollTop: scrollTop,
1479-            duration: 500
1480-          }).catch((err) => {
1481-            console.error('滚动失败：', err)
1482-          })
1483-        } else {
1484-          // 如果找不到元素，延迟重试一次
1485-          setTimeout(() => {
1486-            const retryQuery = wx.createSelectorQuery().in(this)
1487-            retryQuery.select('#generate-section').boundingClientRect()
1488-            retryQuery.selectViewport().scrollOffset()
1489-            retryQuery.exec((retryRes) => {
1490-              if (retryRes && retryRes[0] && retryRes[1]) {
1491-                const scrollTop = retryRes[1].scrollTop + retryRes[0].top - 30
1492-                wx.pageScrollTo({
1493-                  scrollTop: scrollTop,
1494-                  duration: 500
1495-                })
1496-              }
1497-            })
1498-          }, 200)
1499-        }
1500-      })
1501-    }, 100)
1502-  },
1503-
1504-  /**
1505-   * 滚动到游戏详情区域
1506-   */
1507-  _scrollToGameDetail() {
1508-    // 延迟一下，确保页面渲染完成
1509-    setTimeout(() => {
1510-      const query = wx.createSelectorQuery().in(this)
1511-      query.select('#game-detail').boundingClientRect()
1512-      query.selectViewport().scrollOffset()
1513-      query.exec((res) => {
1514-        console.log('滚动查询结果：', res)
1515-        if (res && res[0] && res[1]) {
1516-          // 计算目标滚动位置：当前滚动位置 + 元素距离视口顶部的距离 - 偏移量
1517-          const scrollTop = res[1].scrollTop + res[0].top - 30
1518-          console.log('准备滚动到：', scrollTop)
1519-          wx.pageScrollTo({
1520-            scrollTop: scrollTop,
1521-            duration: 500
1522-          }).then(() => {
1523-            console.log('滚动成功')
1524-          }).catch((err) => {
1525-            console.error('滚动失败：', err)
1526-            // 如果失败，尝试使用更简单的方式
1527-            wx.pageScrollTo({
1528-              scrollTop: scrollTop,
1529-              duration: 500
1530-            })
1531-          })
1532-        } else {
1533-          console.warn('未找到游戏详情区域，延迟重试')
1534-          // 如果第一次没找到，再延迟一点重试
1535-          setTimeout(() => {
1536-            const retryQuery = wx.createSelectorQuery().in(this)
1537-            retryQuery.select('#game-detail').boundingClientRect()
1538-            retryQuery.selectViewport().scrollOffset()
1539-            retryQuery.exec((retryRes) => {
1540-              if (retryRes && retryRes[0] && retryRes[1]) {
1541-                const retryScrollTop = retryRes[1].scrollTop + retryRes[0].top - 30
1542-                wx.pageScrollTo({
1543-                  scrollTop: retryScrollTop,
1544-                  duration: 500
1545-                })
1546-              }
1547-            })
1548-          }, 200)
1549-        }
1550-      })
1551-    }, 300) // 增加延迟时间，确保页面完全渲染
1552-  },
1553-
1554-  /**
1555-   * 随机生成游戏（内部逻辑，不包含广告）
1556-   */
1557-  _applyRandomGame() {
1558:    const games = this.data.sceneGames[this.data.selectedScene]
1559-    const randomIndex = Math.floor(Math.random() * games.length)
1560-    const selectedGame = games[randomIndex]
1561-    this.setData({ currentGame: selectedGame }, () => {
1562-      // setData 完成后滚动到详情区域
1563-      this._scrollToGameDetail()
1564-    })
1565-    console.log('随机生成游戏：', selectedGame.name)
1566-  },
1567-
1568-  /**
1569-   * 随机生成游戏：先看激励视频广告，看完后随机选一款游戏
1570-   */
1571-  randomGenerate() {
1572-    if (!this.data.selectedScene) {
1573-      wx.showToast({ title: '请先选择场景', icon: 'none', duration: 2000 })
1574-      return
1575-    }
1576-    this.showAdThenRun(() => this._applyRandomGame())
1577-  },
1578-
1579-  /**
1580-   * 指定游戏生成：点击游戏名称时先看激励视频广告，看完后展示该游戏
1581-   */
1582-  selectGame(e) {
1583-    const gameName = e.currentTarget.dataset.name
1584-    if (!this.data.selectedScene) {
1585-      wx.showToast({ title: '请先选择场景', icon: 'none', duration: 2000 })
1586-      return
1587-    }
1588:    const games = this.data.sceneGames[this.data.selectedScene]
1589-    const selectedGame = games.find(game => game.name === gameName)
1590-    if (!selectedGame) return
1591-    this.showAdThenRun(() => {
1592-      this.setData({ currentGame: selectedGame }, () => {
1593-        // setData 完成后滚动到详情区域
1594-        this._scrollToGameDetail()
1595-      })
1596-      console.log('选择游戏：', selectedGame.name)
1597-    })
1598-  },
1599-
1600-  /**
1601-   * 换一个游戏：先看激励视频广告，看完后在同一场景下重新随机生成
1602-   */
1603-  changeGame() {
1604-    if (!this.data.selectedScene) return
1605-    this.showAdThenRun(() => this._applyRandomGame())
1606-  },
1607-
1608-  /**
1609-   * 切换24点算术显示/隐藏
1610-   */
1611-  toggleGame24() {
1612-    const showGame24 = !this.data.showGame24
1613-    this.setData({ showGame24 })
1614-    if (showGame24) {
1615-      this.newGame24()
1616-    } else {
1617-      this.setData({
1618-        game24Expression: '',
1619-        game24Message: '',
1620-        game24MessageType: ''
1621-      })
1622-    }
1623-  },
1624-
1625-  /**
1626-   * 生成新的24点算术（从预设组合中随机选择，确保不重复）
1627-   */
1628-  newGame24() {
1629-    // 获取已使用的组合索引（从本地存储）
1630-    let usedIndices = wx.getStorageSync('game24_used_indices') || []
1631-    
1632-    // 如果所有组合都用完了，重置记录
1633-    if (usedIndices.length >= GAME24_COMBINATIONS.length) {
1634-      usedIndices = []
1635-      wx.setStorageSync('game24_used_indices', [])
1636-    }
1637-    
1638-    // 获取未使用的组合索引
1639-    const availableIndices = []
1640-    for (let i = 0; i < GAME24_COMBINATIONS.length; i++) {
1641-      if (usedIndices.indexOf(i) === -1) {
1642-        availableIndices.push(i)
1643-      }
1644-    }
1645-    
1646-    // 从未使用的组合中随机选择一个
1647-    const randomIndex = availableIndices[Math.floor(Math.random() * availableIndices.length)]
1648-    const numbers = [...GAME24_COMBINATIONS[randomIndex]]
1649-    
1650-    // 记录已使用的索引
1651-    usedIndices.push(randomIndex)
1652-    wx.setStorageSync('game24_used_indices', usedIndices)
1653-    
1654-    this.setData({
1655-      game24Numbers: numbers,
1656-      game24Expression: '',
1657-      game24Message: '',
1658-      game24MessageType: '',
1659-      game24Answer: ''
1660-    })
1661-
1662-    // 立即在后台计算答案（不显示加载提示）
1663-    setTimeout(() => {
1664-      try {
1665-        const answer = this._solve24(numbers)
1666-        if (answer) {
1667-          this.setData({
1668-            game24Answer: answer
1669-          })
1670-          console.log('24点答案计算成功:', numbers, '->', answer)
1671-        } else {
1672-          console.error('24点答案计算失败:', numbers)
1673-          // 如果找不到答案，可能是算法问题，需要优化
1674-        }
1675-      } catch (e) {
1676-        console.error('24点答案计算异常:', numbers, e)
1677-      }
1678-    }, 50)
1679-  },
1680-
1681-  /**
1682-   * 显示24点算术答案
1683-   */
1684-  showGame24Answer() {
1685-    const numbers = this.data.game24Numbers
1686-    if (numbers.length !== 4) {
1687-      wx.showToast({
1688-        title: '请先生成题目',
1689-        icon: 'none'
1690-      })
1691-      return
1692-    }
1693-
1694-    // 如果已经有答案，直接显示
1695-    if (this.data.game24Answer) {
1696-      this.setData({
1697-        game24Message: `💡 答案：${this.data.game24Answer}\n（24 点的解法可不止这一种哦，这只是其中一个思路，快试试能不能想出更多创意解法吧～）`,
1698-        game24MessageType: 'success'
1699-      })
1700-      return
1701-    }
1702-
1703-    // 计算答案
1704-    wx.showLoading({
1705-      title: '计算中...',
1706-      mask: true
1707-    })
1708-
1709-    setTimeout(() => {
1710-      const answer = this._solve24(numbers)
1711-      if (answer) {
1712-        this.setData({
1713-          game24Answer: answer,
1714-          game24Message: `💡 答案：${answer}\n（可能有多个答案，这里只给一个）`,
1715-          game24MessageType: 'success'
1716-        })
1717-      } else {
1718-        this.setData({
1719-          game24Message: '❌ 这组数字无法计算出24，点击"换一组数字"试试',
1720-          game24MessageType: 'error'
1721-        })
1722-      }
1723-      wx.hideLoading()
1724-    }, 100)
1725-  },
1726-
1727-  /**
1728-   * 24点算术输入处理
1729-   */
1730-  onGame24Input(e) {
1731-    this.setData({
1732-      game24Expression: e.detail.value,
1733-      game24Message: '',
1734-      game24MessageType: ''
1735-    })
1736-  },
1737-
1738-  /**
1739-   * 24点算术虚拟键盘点击处理
1740-   * 支持：数字、加减乘除、括号，以及删除 / 清空
1741-   */
1742-  insertGame24Symbol(e) {
1743-    const value = e.currentTarget.dataset.value
1744-    const action = e.currentTarget.dataset.action
1745-
1746-    let expr = this.data.game24Expression || ''
1747-
1748-    if (action === 'backspace') {
1749-      // 删除最后一个字符
1750-      expr = expr.slice(0, -1)
1751-    } else if (action === 'clear') {
1752-      // 清空输入
1753-      expr = ''
1754-    } else if (value) {
1755-      // 追加一个符号
1756-      expr += value
1757-    }
1758-
1759-    this.setData({
1760-      game24Expression: expr,
1761-      game24Message: '',
1762-      game24MessageType: ''
1763-    })
1764-  },
1765-
1766-  /**
1767-   * 提交24点算术答案
1768-   */
1769-  submitGame24() {
1770-    const expression = this.data.game24Expression.trim()
1771-    const numbers = this.data.game24Numbers
1772-
1773-    if (!expression) {
1774-      this.setData({
1775-        game24Message: '请输入算式',
1776-        game24MessageType: 'error'
1777-      })
1778-      return
1779-    }
1780-
1781-    // 验证是否使用了所有4个数字
1782-    const usedNumbers = this._extractNumbers(expression)
1783-    if (!this._validateNumbers(usedNumbers, numbers)) {
1784-      this.setData({
1785-        game24Message: '❌ 必须使用全部4个数字，且每个数字只能使用一次',
1786-        game24MessageType: 'error'
1787-      })
1788-      return
1789-    }
1790-
1791-    // 计算表达式结果
1792-    try {
1793-      const result = this._safeEval(expression)
1794-      if (Math.abs(result - 24) < 0.0001) {
1795-        this.setData({
1796-          game24Message: '🎉 恭喜！答案正确！点击"换一组数字"继续挑战',
1797-          game24MessageType: 'success'
1798-        })
1799-        // 不再自动生成新题目，让用户手动点击"换一组数字"
1800-      } else {
1801-        this.setData({
1802-          game24Message: `❌ 计算结果为 ${result}，不等于24，请再试试`,
1803-          game24MessageType: 'error'
1804-        })
1805-      }
1806-    } catch (e) {
1807-      this.setData({
1808-        game24Message: '❌ 算式格式错误，请检查',
1809-        game24MessageType: 'error'
1810-      })
1811-    }
1812-  },
1813-
1814-  /**
1815-   * 从表达式中提取数字
1816-   */
1817-  _extractNumbers(expression) {
1818-    // 移除所有运算符和括号，提取数字
1819-    const numbers = []
1820-    const regex = /\d+/g
1821-    let match
1822-    while ((match = regex.exec(expression)) !== null) {
1823-      numbers.push(parseInt(match[0]))
1824-    }
1825-    return numbers
1826-  },
1827-
1828-  /**
1829-   * 验证使用的数字是否与给定的4个数字匹配
1830-   */
1831-  _validateNumbers(usedNumbers, targetNumbers) {
1832-    if (usedNumbers.length !== 4) {
1833-      return false
1834-    }
1835-    const sortedUsed = [...usedNumbers].sort((a, b) => a - b)
1836-    const sortedTarget = [...targetNumbers].sort((a, b) => a - b)
1837-    for (let i = 0; i < 4; i++) {
1838-      if (sortedUsed[i] !== sortedTarget[i]) {
1839-        return false
1840-      }
1841-    }
1842-    return true
1843-  },
1844-
1845-  /**
1846-   * 求解24点问题
1847-   */
1848-  _solve24(numbers) {
1849-    if (numbers.length !== 4) {
1850-      console.error('_solve24: 数字数量不正确', numbers)
1851-      return null
1852-    }
1853-    
1854-    try {
1855-      // 尝试所有可能的运算组合
1856-      const ops = ['+', '-', '*', '/']
1857-      const nums = numbers.map(n => Number(n)) // 确保是数字类型
1858-      
1859-      // 生成所有可能的数字排列
1860-      const permutations = this._permute(nums)
1861-      if (!permutations || permutations.length === 0) {
1862-        console.error('_solve24: 排列生成失败', numbers)
1863-        return null
1864-      }
1865-      
1866-      // 尝试所有排列和运算符组合
1867-      let totalAttempts = 0
1868-      let errorCount = 0
1869-      for (const perm of permutations) {
1870-        for (const op1 of ops) {
1871-          for (const op2 of ops) {
1872-            for (const op3 of ops) {
1873-              // 尝试不同的括号组合（增加更多组合以确保覆盖所有情况）
1874-              const expressions = [
1875-                `(${perm[0]}${op1}${perm[1]})${op2}(${perm[2]}${op3}${perm[3]})`,
1876-                `((${perm[0]}${op1}${perm[1]})${op2}${perm[2]})${op3}${perm[3]}`,
1877-                `(${perm[0]}${op1}(${perm[1]}${op2}${perm[2]}))${op3}${perm[3]}`,
1878-                `${perm[0]}${op1}((${perm[1]}${op2}${perm[2]})${op3}${perm[3]})`,
1879-                `${perm[0]}${op1}(${perm[1]}${op2}(${perm[2]}${op3}${perm[3]}))`,
1880-                `(${perm[0]}${op1}${perm[1]})${op2}${perm[2]}${op3}${perm[3]}`,
1881-                `${perm[0]}${op1}(${perm[1]}${op2}${perm[2]})${op3}${perm[3]}`,
1882-                `${perm[0]}${op1}${perm[1]}${op2}(${perm[2]}${op3}${perm[3]})`,
1883-                `(${perm[0]}${op1}${perm[1]}${op2}${perm[2]})${op3}${perm[3]}`,
1884-                `${perm[0]}${op1}${perm[1]}${op2}${perm[2]}${op3}${perm[3]}`
1885-              ]
1886-              
1887-              for (const expr of expressions) {
1888-                totalAttempts++
1889-                try {
1890-                  const result = this._safeEval(expr)
1891-                  // 检查结果是否有效（与 _safeEval 中的检查保持一致）
1892-                  if (result !== null && result !== undefined && !isNaN(result) && isFinite(result)) {
1893-                    const diff = Math.abs(result - 24)
1894-                    if (diff < 0.0001) {
1895-                      // 转换为中文运算符显示
1896-                      const answer = expr
1897-                        .replace(/\*/g, '×')
1898-                        .replace(/\//g, '÷')
1899-                      console.log('_solve24: 找到答案', numbers, '->', answer, '结果:', result, '尝试次数:', totalAttempts)
1900-                      return answer
1901-                    }
1902-                  }
1903-                } catch (e) {
1904-                  errorCount++
1905-                  // 忽略计算错误，继续尝试
1906-                  // 只在调试时输出错误（避免控制台刷屏）
1907-                  // console.log('_solve24: 表达式计算失败', expr, e.message)
1908-                }
1909-              }
1910-            }
1911-          }
1912-        }
1913-      }
1914-      
1915-      console.error('_solve24: 未找到答案', numbers, '总尝试次数:', totalAttempts, '错误次数:', errorCount)
1916-      return null
1917-    } catch (e) {
1918-      console.error('_solve24: 异常', numbers, e)
1919-      return null
1920-    }
1921-  },
1922-
1923-  /**
1924-   * 生成数组的所有排列
1925-   */
1926-  _permute(arr) {
1927-    if (arr.length <= 1) return [arr]
1928-    const result = []
1929-    for (let i = 0; i < arr.length; i++) {
1930-      const rest = [...arr.slice(0, i), ...arr.slice(i + 1)]
1931-      const perms = this._permute(rest)
1932-      for (const perm of perms) {
1933-        result.push([arr[i], ...perm])
1934-      }
1935-    }
1936-    return result
1937-  },
1938-
1939-  /**
1940-   * 安全计算表达式（不依赖 eval 和 new Function，使用栈计算）
1941-   */
1942-  _safeEval(expression) {
1943-    try {
1944-      // 替换中文运算符为英文
1945-      let expr = expression
1946-        .replace(/×/g, '*')
1947-        .replace(/÷/g, '/')
1948-        .replace(/（/g, '(')
1949-        .replace(/）/g, ')')
1950-        .replace(/\s+/g, '')
1951-      
1952-      // 验证表达式只包含数字、运算符和括号
1953-      if (!/^[\d\+\-\*\/\(\)\.\s]+$/.test(expr)) {
1954-        throw new Error('Invalid expression: ' + expr)
1955-      }
1956-
1957-      // 使用栈计算表达式（不依赖 eval 和 new Function）
1958-      return this._calculateExpression(expr)
1959-    } catch (e) {
1960-      throw e
1961-    }
1962-  },
1963-
1964-  /**
1965-   * 使用栈计算表达式（支持 +、-、*、/ 和括号）
1966-   */
1967-  _calculateExpression(expr) {
1968-    // 处理负数：将 (- 替换为 (0-
1969-    expr = expr.replace(/\(-/g, '(0-')
1970-    // 处理开头的负数
1971-    if (expr.startsWith('-')) {
1972-      expr = '0' + expr
1973-    }
1974-
1975-    // 使用两个栈：一个存数字，一个存运算符
1976-    const numStack = []
1977-    const opStack = []
1978-    
1979-    let i = 0
1980-    while (i < expr.length) {
1981-      const char = expr[i]
1982-      
1983-      // 跳过空格
1984-      if (char === ' ') {
1985-        i++
1986-        continue
1987-      }
1988-      
1989-      // 如果是数字，读取完整的数字
1990-      if (this._isDigit(char)) {
1991-        let num = ''
1992-        while (i < expr.length && (this._isDigit(expr[i]) || expr[i] === '.')) {
1993-          num += expr[i]
1994-          i++
1995-        }
1996-        numStack.push(parseFloat(num))
1997-        continue
1998-      }
1999-      
2000-      // 如果是左括号，入栈
2001-      if (char === '(') {
2002-        opStack.push(char)
2003-        i++
2004-        continue
2005-      }
2006-      
2007-      // 如果是右括号，计算到左括号
2008-      if (char === ')') {
2009-        while (opStack.length > 0 && opStack[opStack.length - 1] !== '(') {
2010-          this._applyOperator(numStack, opStack)
2011-        }
2012-        opStack.pop() // 移除左括号
2013-        i++
2014-        continue
2015-      }
2016-      
2017-      // 如果是运算符
2018-      if (this._isOperator(char)) {
2019-        // 处理运算符优先级
2020-        while (opStack.length > 0 && 
2021-               opStack[opStack.length - 1] !== '(' &&
2022-               this._getPrecedence(opStack[opStack.length - 1]) >= this._getPrecedence(char)) {
2023-          this._applyOperator(numStack, opStack)
2024-        }
2025-        opStack.push(char)
2026-        i++
2027-        continue
2028-      }
2029-      
2030-      i++
2031-    }
2032-    
2033-    // 处理剩余的运算符
2034-    while (opStack.length > 0) {
2035-      this._applyOperator(numStack, opStack)
2036-    }
2037-    
2038-    if (numStack.length !== 1) {
2039-      throw new Error('Invalid expression')
2040-    }
2041-    
2042-    const result = numStack[0]
2043-    if (result === null || result === undefined || isNaN(result) || !isFinite(result)) {
2044-      throw new Error('Invalid result: ' + result)
2045-    }
2046-    
2047-    return result
2048-  },
2049-
2050-  /**
2051-   * 判断是否是数字
2052-   */
2053-  _isDigit(char) {
2054-    return char >= '0' && char <= '9'
2055-  },
2056-
2057-  /**
2058-   * 判断是否是运算符
2059-   */
2060-  _isOperator(char) {
2061-    return char === '+' || char === '-' || char === '*' || char === '/'
2062-  },
2063-
2064-  /**
2065-   * 获取运算符优先级
2066-   */
2067-  _getPrecedence(op) {
2068-    if (op === '+' || op === '-') {
2069-      return 1
2070-    }
2071-    if (op === '*' || op === '/') {
2072-      return 2
2073-    }
2074-    return 0
2075-  },
2076-
2077-  /**
2078-   * 应用运算符
2079-   */
2080-  _applyOperator(numStack, opStack) {
2081-    if (numStack.length < 2 || opStack.length < 1) {
2082-      throw new Error('Invalid expression')
2083-    }
2084-    
2085-    const b = numStack.pop()
2086-    const a = numStack.pop()
2087-    const op = opStack.pop()
2088-    
2089-    let result
2090-    switch (op) {
2091-      case '+':
2092-        result = a + b
2093-        break
2094-      case '-':
2095-        result = a - b
2096-        break
2097-      case '*':
2098-        result = a * b
2099-        break
2100-      case '/':
2101-        if (b === 0) {
2102-          throw new Error('Division by zero')
2103-        }
2104-        result = a / b
2105-        break
2106-      default:
2107-        throw new Error('Unknown operator: ' + op)
2108-    }
2109-    
2110-    numStack.push(result)
2111-  }
2112-
2113-})
